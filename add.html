<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Insert Patients</title>
    <meta charset="utf-8" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  </head>
  <style>
    .form-container {
      margin-top: 30px;
      display: flex;
      justify-content: center;
    }
    .btn {
      margin-top: 20px;
      width: 100%;
    }
  </style>
  <body>
    <div class="form-container">
      <form id="form1">
        <label for="name">Name:</label><br />
        <input type="text" class="form-control" id="name" />

        <label for="gender">Gender:</label><br />
        <select id="gender" class="form-control">
          <option value="0">choose gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>

        <label for="age">Age:</label><br />
        <input type="text" class="form-control" id="age" />

        <label for="address">Address:</label><br />
        <textarea
          id="address"
          class="form-control"
          rows="4"
          cols="50"
        ></textarea>

        <label for="city">City:</label><br />
        <input type="text" class="form-control" id="city" />

        <label for="state">State:</label><br />
        <input type="text" class="form-control" id="state" />

        <label for="mobileno">Mobile No:</label><br />
        <input type="text" class="form-control" id="mobileno" />

        <input class="btn btn-primary" type="submit" value="Submit" />
        <br />
        <br />
        <br />
        <a href="index.html">Main Page</a>
      </form>

      <br />
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      $(function () {
        $("#form1").submit(function (event) {
          event.preventDefault(); //prevent redirect/page refresh

          var patient = new Object();
          patient.name = $("#name").val();
          patient.gender = $("#gender").val();
          patient.age = $("#age").val();
          patient.address = $("#address").val();
          patient.city = $("#city").val();
          patient.state = $("#state").val();
          patient.mobileno = $("#mobileno").val();

          $.ajax({
            type: "post",
            url: "http://localhost:8888/patients",
            contentType: "application/json",
            data: JSON.stringify(patient),
            dataType: "json",
            success: function (data) {
              setTimeout(() => {
                window.location.href = "index.html";
              }, 2000);
            },
            error: function () {
              console.log("error");
            },
          });
        });
      });
    </script>
  </body>
</html>
